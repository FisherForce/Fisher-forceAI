<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Fisher-Force AI — La 1ère IA de pêche 100% Française</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
    .live-badge { position: fixed; top: 15px; left: 15px; background: #00d4aa; color: white; padding: 10px 16px; border-radius: 50px; font-weight: bold; font-size: 14px; box-shadow: 0 4px 12px rgba(0,212,170,0.4); z-index: 9999; display: flex; align-items: center; gap: 8px; animation: pulse 2s infinite; }
    .live-dot { width: 10px; height: 10px; background: #fff; border-radius: 50%; animation: blink 1.5s infinite; }
    .dashboard { background: linear-gradient(135deg, #00d4aa, #00a085); color: white; padding: 18px; border-radius: 16px; margin: 20px 0; text-align: center; box-shadow: 0 8px 20px rgba(0,212,170,0.3); }
    .level-badge { background: #ffd700; color: #000; padding: 6px 14px; border-radius: 30px; font-weight: bold; }
  </style>
</head>
<body>

  <div class="live-badge"><span class="live-dot"></span> IA en direct : <span id="patternCount">42</span> patterns appris</div>

  <!-- AUTH + BOUTON AMIS -->
  <div id="authContainer" style="position:fixed;top:15px;right:15px;z-index:9999;display:flex;gap:12px;align-items:center;background:rgba(0,0,0,0.4);padding:10px 16px;border-radius:30px;">
    <div id="userInfo" style="display:none;color:white;font-weight:bold;align-items:center;gap:10px;">
      <input id="pseudoInput" type="text" placeholder="Ton pseudo" style="padding:6px 10px;border-radius:20px;border:none;font-size:13px;width:100px;">
      <button id="savePseudo" style="background:#ffd700;color:#000;border:none;padding:6px 12px;border-radius:20px;font-size:12px;cursor:pointer;">OK</button>
      <button id="logoutBtn" style="background:#e74c3c;color:white;border:none;padding:8px 14px;border-radius:25px;font-size:12px;cursor:pointer;">Déco</button>
    </div>
    <button id="loginBtn" style="background:#4285f4;color:white;border:none;padding:10px 20px;border-radius:25px;font-weight:bold;cursor:pointer;">Connexion Google</button>
    <button id="friendsBtn" style="background:#ffd700;color:#000;border:none;padding:10px 20px;border-radius:25px;font-weight:bold;cursor:pointer;font-size:14px;">
      Amis (<span id="friendCount">0</span>)
    </button>
  </div>

  <!-- MODALE AMIS -->
  <div id="friendsModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.98);z-index:9999;overflow-y:auto;padding:20px;">
    <div style="max-width:420px;margin:0 auto;background:#112233;border-radius:20px;padding:20px;position:relative;">
      <button onclick="closeModal('friendsModal')" style="position:absolute;top:10px;right:10px;background:#e74c3c;color:white;border:none;padding:10px 16px;border-radius:50%;font-size:18px;cursor:pointer;">X</button>
      <h2 style="text-align:center;color:#00d4aa;margin:0 0 20px;">Amis FisherForce</h2>
      <div style="background:#333;padding:15px;border-radius:12px;margin-bottom:20px;">
        <input type="text" id="searchFriend" placeholder="Pseudo exact de ton pote" style="width:100%;padding:12px;border:none;border-radius:10px;margin-bottom:10px;">
        <button onclick="addFriendByPseudo()" style="width:100%;background:#00d4aa;color:white;padding:12px;border:none;border-radius:10px;font-weight:bold;">Ajouter cet ami</button>
      </div>
      <div id="friendsList" style="color:white;">Chargement…</div>
    </div>
  </div>

  <!-- CONTENU PRINCIPAL (inchangé) -->
  <header class="site-header"><div class="container"><h1>Fisher-Force AI</h1><p class="tagline">La 1ère IA de pêche 100% Française</p></div></header>
  <main class="container main-grid">
    <!-- Ton formulaire + conseils + classement (tu gardes tout tel quel) -->
    <!-- ... (tout ton code existant) ... -->
  </main>

  <button id="openMapBtn" style="position:fixed;bottom:20px;right:20px;background:#00d4aa;color:white;border:none;padding:16px 20px;border-radius:50%;font-size:28px;box-shadow:0 8px 25px rgba(0,212,170,0.6);z-index:9998;cursor:pointer;">Map</button>

  <div id="mapModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);z-index:9999;">
    <div style="position:relative;width:100%;height:100%;">
      <button onclick="closeModal('mapModal')" style="position:absolute;top:15px;right:15px;background:#e74c3c;color:white;border:none;padding:12px 18px;border-radius:50%;font-size:18px;z-index:10000;cursor:pointer;">X</button>
      <h2 id="mapTitle" style="position:absolute;top:15px;left:50%;transform:translateX(-50%);color:#00d4aa;z-index:10000;font-size:26px;text-shadow:0 2px 10px black;">Ma Carte Secrète</h2>
      <div id="fishingMap" style="width:100%;height:100%;"></div>
    </div>
  </div>

  <!-- TOUT EST DANS app.js MAINTENANT -->
  <script src="app.js"></script>
</body>
</html>
